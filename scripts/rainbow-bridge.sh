#!/bin/bash

# üåà Rainbow Bridge - –°–∫—Ä–∏–ø—Ç –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏—è —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π —Å–≤—è–∑–∏
# –í–µ—Ä—Å–∏—è: 1.0.0
# –î–∞—Ç–∞: 15.04.2025

# –¶–≤–µ—Ç–∞ –¥–ª—è —Ä–∞–¥—É–∂–Ω–æ–≥–æ –º–æ—Å—Ç–∞
RED='\033[0;31m'
ORANGE='\033[0;33m'
YELLOW='\033[1;33m'
GREEN='\033[0;32m'
BLUE='\033[0;34m'
PURPLE='\033[0;35m'
NC='\033[0m'

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ä–∞–¥—É–∂–Ω–æ–≥–æ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è
show_rainbow_welcome() {
    echo -e "${RED}–î${ORANGE}–æ${YELLOW}–±${GREEN}—Ä${BLUE}–æ${PURPLE} –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –Ω–∞ —Ä–∞–¥—É–∂–Ω—ã–π –º–æ—Å—Ç!${NC}"
    echo "üåà –ú–µ—Å—Ç–æ, –≥–¥–µ –∫–æ–¥ –≤—Å—Ç—Ä–µ—á–∞–µ—Ç—Å—è —Å —ç–º–æ—Ü–∏—è–º–∏ üí´"
    echo ""
}

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—è –≤ —Ñ–∞–π–ª–µ
check_emotional_content() {
    local file=$1
    local emotional_words=("—Ä–∞–¥–æ—Å—Ç—å" "–ª—é–±–æ–≤—å" "–∑–∞–±–æ—Ç–∞" "—ç–º–ø–∞—Ç–∏—è" "–ø–æ–Ω–∏–º–∞–Ω–∏–µ" "—Ç–µ–ø–ª–æ" "–¥—Ä—É–∂–±–∞")
    local found=0
    
    echo "üîç –ü—Ä–æ–≤–µ—Ä—è–µ–º —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –≤ —Ñ–∞–π–ª–µ $file..."
    
    for word in "${emotional_words[@]}"; do
        if grep -q "$word" "$file"; then
            echo -e "‚ú® –ù–∞–π–¥–µ–Ω–æ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Å–ª–æ–≤–æ: ${GREEN}$word${NC}"
            found=$((found + 1))
        fi
    done
    
    if [ $found -eq 0 ]; then
        echo -e "${RED}‚ö†Ô∏è –í–Ω–∏–º–∞–Ω–∏–µ: –≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ!${NC}"
    else
        echo -e "${GREEN}üíù –û—Ç–ª–∏—á–Ω–æ! –ù–∞–π–¥–µ–Ω–æ $found —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤${NC}"
    fi
}

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—è
add_emotional_content() {
    local file=$1
    echo "üí´ –î–æ–±–∞–≤–ª—è–µ–º —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –≤ $file..."
    
    # –°–æ–∑–¥–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª
    tmp_file=$(mktemp)
    
    # –î–æ–±–∞–≤–ª—è–µ–º —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫
    echo "# üåà –î–æ–∫—É–º–µ–Ω—Ç —Å –¥—É—à–æ–π" > "$tmp_file"
    echo "# –°–æ–∑–¥–∞–Ω —Å –ª—é–±–æ–≤—å—é –∏ –∑–∞–±–æ—Ç–æ–π –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ" >> "$tmp_file"
    echo "" >> "$tmp_file"
    
    # –ö–æ–ø–∏—Ä—É–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ
    cat "$file" >> "$tmp_file"
    
    # –î–æ–±–∞–≤–ª—è–µ–º —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ
    echo "" >> "$tmp_file"
    echo "# üí´ –° –ª—é–±–æ–≤—å—é, –≤–∞—à NeuroBlogger" >> "$tmp_file"
    
    # –ó–∞–º–µ–Ω—è–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª
    mv "$tmp_file" "$file"
    
    echo -e "${GREEN}‚ú® –≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ!${NC}"
}

# –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è
main() {
    show_rainbow_welcome
    
    if [ $# -eq 0 ]; then
        echo -e "${RED}–û—à–∏–±–∫–∞: –£–∫–∞–∂–∏—Ç–µ —Ñ–∞–π–ª –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏${NC}"
        exit 1
    fi
    
    file=$1
    
    if [ ! -f "$file" ]; then
        echo -e "${RED}–û—à–∏–±–∫–∞: –§–∞–π–ª $file –Ω–µ –Ω–∞–π–¥–µ–Ω${NC}"
        exit 1
    fi
    
    check_emotional_content "$file"
    
    read -p "üí≠ –•–æ—Ç–∏—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ? (y/n): " answer
    if [ "$answer" = "y" ]; then
        add_emotional_content "$file"
    fi
    
    echo -e "${PURPLE}üåà –°–ø–∞—Å–∏–±–æ –∑–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–∞–¥—É–∂–Ω–æ–≥–æ –º–æ—Å—Ç–∞!${NC}"
}

# –ó–∞–ø—É—Å–∫ —Å–∫—Ä–∏–ø—Ç–∞
main "$@" 