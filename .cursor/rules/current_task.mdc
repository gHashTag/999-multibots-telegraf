---
description: 
globs: 
alwaysApply: true
---
# ‚úÖ –û—Ç–ª–∞–¥–∫–∞, –°—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è –ù–∞–≤–∏–≥–∞—Ü–∏–∏ –∏ –§–∏–∫—Å–∞—Ü–∏—è –ò—Å—Ç–æ—Ä–∏–∏

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–∞ (–í–æ–∑–≤—Ä–∞—â–µ–Ω—ã –∫ —Å—Ç–∞–±–∏–ª—å–Ω–æ–º—É —Å–æ—Å—Ç–æ—è–Ω–∏—é)

**1. –û—Ç–ª–∞–¥–∫–∞ Gaia_Kamskaia_bot:**
    *   **–¶–µ–ª—å:** –ò—Å–ø—Ä–∞–≤–∏—Ç—å –±–∞–≥ —Å –∫–Ω–æ–ø–∫–æ–π "–¶–∏—Ñ—Ä–æ–≤–æ–µ —Ç–µ–ª–æ".
    *   **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ.

**2. –°—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è –ù–∞–≤–∏–≥–∞—Ü–∏–∏:**
    *   **–¶–µ–ª—å:** –£—Å—Ç—Ä–∞–Ω–∏—Ç—å —Ä–µ–≥—Ä–µ—Å—Å–∏—é —Å `/menu` –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã–º–∏ –∫–Ω–æ–ø–∫–∞–º–∏.
    *   **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –ø–æ—Ä—è–¥–æ–∫ middleware –∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –≤ `src/registerCommands.ts`.

**3. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –†–µ–≥—Ä–µ—Å—Å–∏–∏ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –ö–Ω–æ–ø–æ–∫:**
    *   **–¶–µ–ª—å:** –£—Å—Ç—Ä–∞–Ω–∏—Ç—å —Ä–µ–≥—Ä–µ—Å—Å–∏—é —Å –∫–Ω–æ–ø–∫–æ–π "–¶–∏—Ñ—Ä–æ–≤–æ–µ —Ç–µ–ª–æ" –∏ –¥—Ä.
    *   **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –û–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ middleware/–æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–≥–ª–∞—Å–Ω–æ —É—Ç–æ—á–Ω–µ–Ω–Ω–æ–º—É –ø–∞—Ç—Ç–µ—Ä–Ω—É.

**‚öì –ü–∞—Ç—Ç–µ—Ä–Ω –°—Ç–∞–±–∏–ª—å–Ω–æ–π –ù–∞–≤–∏–≥–∞—Ü–∏–∏ (–§–∏–Ω–∞–ª—å–Ω—ã–π):**
    *   **–ü–æ—Ä—è–¥–æ–∫ Middleware:** –í `src/registerCommands.ts`:
        1.  –õ–æ–≥–≥–µ—Ä (`bot.use((ctx, next) => { logger.info(...) ... })`).
        2.  –°–µ—Å—Å–∏—è (`bot.use(session(...))`).
        3.  Middleware —Å—Ü–µ–Ω (`bot.use(stage.middleware())`).
        4.  **–í—Å–µ** –æ—Å—Ç–∞–ª—å–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ (`hears`, `action`, `command`), –∫–æ—Ç–æ—Ä—ã–º –Ω—É–∂–µ–Ω `ctx.session` –∏–ª–∏ `ctx.scene`.
        5.  –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã—Ö –∫–æ–ª–±—ç–∫–æ–≤ (`bot.on(callbackQuery('data'), ...)`).
        6.  –û–±—â–∏–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ç–µ–∫—Å—Ç–∞ –≤ –°–ê–ú–û–ú –ö–û–ù–¶–ï (`bot.on(message('text'), handleTextMessage)`).
    *   **–ü—Ä–æ—á–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã:** –Ø–≤–Ω—ã–π `bot.command('menu')`, —É–¥–∞–ª–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä—É—é—â–µ–π –ª–æ–≥–∏–∫–∏ –∏–∑ `handleMenu.ts`.

**‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
    *   **–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ:** –ü–æ—Å–ª–µ `git reset --hard 2e110b78` –≤—Å–µ –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã–µ –∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ (–≤–∫–ª—é—á–∞—è "–¶–∏—Ñ—Ä–æ–≤–æ–µ —Ç–µ–ª–æ" –∏ "–û—Ç–º–µ–Ω–∞") —Å–Ω–æ–≤–∞ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

**üìå –†–µ–ø–µ—Ä–Ω–∞—è –¢–æ—á–∫–∞:** –ö–æ–º–º–∏—Ç `2e110b78` (`feat: Stabilize middleware/handler order for reliable navigation`) —è–≤–ª—è–µ—Ç—Å—è **–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω–æ–π —Ä–∞–±–æ—á–µ–π –≤–µ—Ä—Å–∏–µ–π** –¥–ª—è –ª–æ–≥–∏–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–Ω–æ–ø–æ–∫.

**üìù –§–∏–∫—Å–∞—Ü–∏—è –ò—Å—Ç–æ—Ä–∏–∏:**
*   –£—Å–ø–µ—à–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω –∏ —Ä–µ–ø–µ—Ä–Ω–∞—è —Ç–æ—á–∫–∞ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω—ã –≤ `SUCCESS_HISTORY.md`.
*   –ù–µ—É–¥–∞—á–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω (–Ω–µ–≤–µ—Ä–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ middleware) –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω –≤ `REGRESSION_PATTERNS.md`.
*   –°–æ–∑–¥–∞–Ω–æ –ø—Ä–∞–≤–∏–ª–æ `HISTORY_LOGGING.mdc` –¥–ª—è –≤–µ–¥–µ–Ω–∏—è —ç—Ç–∏—Ö —Ñ–∞–π–ª–æ–≤.

**‚û°Ô∏è –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –∑–∞–¥–∞—á–µ "NeurostylistShtogrina_bot - –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –û–ø–ª–∞—Ç—É –ó–≤–µ–∑–¥–∞–º–∏" (—à–∞–≥ 5: **–ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å** –ø—Ä–æ–≤–µ—Ä–∫—É —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ–π –¥–ª—è —ç—Ç–æ–≥–æ –±–æ—Ç–∞ –ª–æ–≥–∏–∫–∏ –æ–ø–ª–∞—Ç—ã –∑–≤–µ–∑–¥).

---

# ‚úèÔ∏è –û—Ç–ª–∞–¥–∫–∞ –û–ø–ª–∞—Ç—ã –†—É–±–ª—è–º–∏ (Robokassa)

**–°—Ç–∞—Ç—É—Å:** ‚è≥ –í –ø—Ä–æ—Ü–µ—Å—Å–µ

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–æ–±—â–∞–µ—Ç –æ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–º –ø–æ–≤–µ–¥–µ–Ω–∏–∏ ("–∫–∞–∫–∞—è-—Ç–æ —Ö—É–π–Ω—è") –ø—Ä–∏ –≤—ã–±–æ—Ä–µ –æ–ø—Ü–∏–∏ "–û–ø–ª–∞—Ç–∏—Ç—å ‚ÇΩ".

**–®–∞–≥–∏:**
1.  ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é (`SUCCESS_HISTORY.md`, `REGRESSION_PATTERNS.md`).
2.  ‚úÖ –í—ã–ø–æ–ª–Ω–∏—Ç—å –ø–æ–∏—Å–∫ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ –∫–Ω–æ–ø–∫–∏/callback'–∞.
3.  ‚úÖ –ü—Ä–æ—á–∏—Ç–∞—Ç—å –∫–æ–¥ `src/scenes/paymentScene/index.ts`.
4.  ‚úÖ –ü—Ä–æ—á–∏—Ç–∞—Ç—å –∫–æ–¥ —Ö–µ–ª–ø–µ—Ä–∞ `src/core/bot/shouldShowRubles.ts`.
5.  ‚úÖ –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥ –∏ –Ω–∞–π—Ç–∏ –ø—Ä–∏—á–∏–Ω—É –æ—à–∏–±–∫–∏ (—É–¥–∞–ª–µ–Ω –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ `hears(['üí≥ –†—É–±–ª—è–º–∏', 'üí≥ Rubles'])`).
6.  ‚úÖ –ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫).
7.  ‚úÖ –ü—Ä–æ—á–∏—Ç–∞—Ç—å `rublePaymentScene.ts` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ª–æ–≥–∏–∫–∏ –≤—Ö–æ–¥–∞.
8.  ‚úÖ –í–Ω–µ—Å—Ç–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤ `src/scenes/paymentScene/index.ts`.
9.  ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–∏–ø—ã (`bun run typecheck`).
10. ‚úèÔ∏è –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Ä—É—á–Ω—É—é –∏–ª–∏ –∑–∞–ø—Ä–æ—Å–∏—Ç—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É –ì—É—Ä—É.
11. –û–±–Ω–æ–≤–∏—Ç—å `SUCCESS_HISTORY.md` (–µ—Å–ª–∏ —É—Å–ø–µ—à–Ω–æ) –∏–ª–∏ `REGRESSION_PATTERNS.md` (–µ—Å–ª–∏ –Ω–∞–π–¥–µ–Ω –Ω–æ–≤—ã–π –∞–Ω—Ç–∏-–ø–∞—Ç—Ç–µ—Ä–Ω).

**‚û°Ô∏è –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ.

---

# üïâÔ∏è –¢–µ–∫—É—â–∞—è –ó–∞–¥–∞—á–∞: –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –ú–æ–¥—É–ª—å–Ω–æ–π –°–∏—Å—Ç–µ–º—ã üïâÔ∏è

**–¶–µ–ª—å:** –°–¥–µ–ª–∞—Ç—å –º–æ–¥—É–ª–∏ –≤ `src/modules` —Å–∞–º–æ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–º–∏, —Å —á–µ—Ç–∫–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏, –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã–º–∏ —á–µ—Ä–µ–∑ DI (Dependency Injection).

**–í–µ—Ç–∫–∞:** `refactor/modular-system`

## üìù –ü–ª–∞–Ω –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

### –ú–æ–¥—É–ª—å: `localImageToVideo`

*   [x] **–ê–Ω–∞–ª–∏–∑ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:** üßê –ò–∑—É—á–∏—Ç—å –∏–º–ø–æ—Ä—Ç—ã –≤ `generateImageToVideo.ts`, `downloadFile.ts` –∏ –¥—Ä—É–≥–∏—Ö —Ñ–∞–π–ª–∞—Ö –º–æ–¥—É–ª—è. –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –≤—Å–µ –≤–Ω–µ—à–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏.
    *   ~~–ì–ª–æ–±–∞–ª—å–Ω—ã–π –∫–ª–∏–µ–Ω—Ç `replicate` –∏–∑ `@/core/replicate`.~~ (–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ fallback, –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ DI - OK)
    *   ~~–ì–ª–æ–±–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è `VIDEO_MODELS_CONFIG` –∏–∑ `./VIDEO_MODELS_CONFIG`...~~ (–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥ - OK)
    *   ~~–¢–∏–ø—ã –∏–∑ `@/interfaces/cost.interface`...~~ (–£–¥–∞–ª–µ–Ω–æ –∏–∑ `types.ts`)
    *   ~~–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è `@/config/models.config`...~~ (–£–¥–∞–ª–µ–Ω–æ –∏–∑ `types.ts`)
    *   –¢–∏–ø—ã `@supabase/supabase-js` –∏ `replicate` (–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫ - OK).
    *   –§—É–Ω–∫—Ü–∏—è `downloadFile` (–í–Ω—É—Ç—Ä–∏ –º–æ–¥—É–ª—è - OK).
    *   –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã `ImageToVideoRequest`, `ImageToVideoResponse`, `ImageToVideoDependencies`, `MinimalLogger` (–í `types.ts` –º–æ–¥—É–ª—è - OK).
*   [x] **–ò–Ω—Ç–µ—Ä–Ω–∞–ª–∏–∑–∞—Ü–∏—è:** üè° –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –Ω–µ—Ç –ª–∏ –ø—Ä–æ—Å—Ç—ã—Ö —Ö–µ–ª–ø–µ—Ä–æ–≤ –≤–Ω–µ –º–æ–¥—É–ª—è, –∫–æ—Ç–æ—Ä—ã–µ –ª–æ–≥–∏—á–Ω–æ –±—ã–ª–æ –±—ã –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –≤–Ω—É—Ç—Ä—å `src/modules/localImageToVideo/utils/`.
*   [x] **–í–Ω–µ–¥—Ä–µ–Ω–∏–µ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:** üö™
    *   [x] –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ `replicate` –∫–ª–∏–µ–Ω—Ç –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `dependencies.replicateClient` –∏ –µ—Å—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–Ω–µ—à–Ω–∏–π (–≥–ª–æ–±–∞–ª—å–Ω—ã–π) –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.
    *   [x] –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ `downloadFile` –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `dependencies.downloadFile` –∏ –µ—Å—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.
    *   [x] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –Ω—É–∂–Ω—ã –ª–∏ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏... (–ù–µ–Ω—É–∂–Ω—ã–µ —É–¥–∞–ª–µ–Ω—ã –∏–∑ `ImageToVideoDependencies` –≤ `types.ts`).
*   [x] **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:** ‚öôÔ∏è –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ `VIDEO_MODELS_CONFIG.ts` –≤–Ω—É—Ç—Ä–∏ –º–æ–¥—É–ª—è —Å–∞–º–æ–¥–æ—Å—Ç–∞—Ç–æ—á–µ–Ω –∏–ª–∏ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –Ω—É–∂–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ DI. –ò–∑–±–µ–≥–∞—Ç—å –ø—Ä—è–º–æ–≥–æ –∏–º–ø–æ—Ä—Ç–∞ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –∫–æ–Ω—Ñ–∏–≥–æ–≤.
*   [ ] **–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ `VIDEO_MODELS_CONFIG.ts`:** ‚ú®
    *   [ ] –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ `findModelByTitle` –≤ `utils/findModel.ts`.
    *   [ ] –£–¥–∞–ª–∏—Ç—å `videoModelKeyboard` –∏ —Å–≤—è–∑–∞–Ω–Ω—ã–µ –∏–º–ø–æ—Ä—Ç—ã `telegraf`.
*   [x] **–¢–∏–ø—ã:** üìú
    *   [x] –£–±—Ä–∞—Ç—å –∏–ª–∏ –∑–∞–º–µ–Ω–∏—Ç—å –∏–º–ø–æ—Ä—Ç `VideoModelKey`... (–£–¥–∞–ª–µ–Ω–æ).
    *   [x] –£–±—Ä–∞—Ç—å –∏–ª–∏ –∑–∞–º–µ–Ω–∏—Ç—å –∏–º–ø–æ—Ä—Ç `VIDEO_MODELS_CONFIG` –∏–∑ `@/config/models.config`... (–£–¥–∞–ª–µ–Ω–æ).
    *   [x] –í—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –≤–Ω–µ—à–Ω–∏–µ —Ç–∏–ø—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø–µ—Ä–µ—ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã... (–û—Å—Ç–∞–≤—à–∏–µ—Å—è –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ç–∏–ø—ã Replicate/Supabase –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã).
*   [ ] **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ `README.md`:** ‚úçÔ∏è –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏ –æ–±–Ω–æ–≤–∏—Ç—å `README.md` –º–æ–¥—É–ª—è, —á—Ç–æ–±—ã –æ–Ω —Ç–æ—á–Ω–æ –æ–ø–∏—Å—ã–≤–∞–ª –∞–∫—Ç—É–∞–ª—å–Ω—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é, –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ.
*   [ ] **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å —Ç–µ—Å—Ç—ã `generateImageToVideo.test.ts`, —á—Ç–æ–±—ã –æ–Ω–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ –º–æ–∫–∏ –¥–ª—è –≤–Ω–µ–¥—Ä—è–µ–º—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (`logger`, `replicateClient`, `downloadFile`). –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç.
*   [ ] **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤:** üïâÔ∏è –ó–∞–ø—É—Å—Ç–∏—Ç—å `bun run typecheck` –∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –≤—Å–µ –æ—à–∏–±–∫–∏ —Ç–∏–ø–æ–≤.

---

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** ‚úèÔ∏è **–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ `VIDEO_MODELS_CONFIG.ts`:** –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ `findModelByTitle` –∏ —É–¥–∞–ª–∏—Ç—å `videoModelKeyboard`.