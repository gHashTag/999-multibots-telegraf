---
description: 
globs: 
alwaysApply: true
---
# üïâÔ∏è –¢–µ–∫—É—â–∞—è –ó–∞–¥–∞—á–∞: –î–µ–ø–ª–æ–π –¢–µ—Å—Ç–æ–≤–æ–≥–æ –û–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞ Vercel (2 –ë–æ—Ç–∞) üöÄ

**–ü—Ä–∏–Ω—Ü–∏–ø:** –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ç–µ—Å—Ç–æ–≤–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –Ω–∞ Vercel (–∏—Å–ø–æ–ª—å–∑—É—è Preview Environment), –∑–∞–ø—É—Å—Ç–∏–≤ —Ç–æ–ª—å–∫–æ –¥–≤–∞ —É–∫–∞–∑–∞–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤—ã—Ö –±–æ—Ç–∞ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏.

**–¶–µ–ª—å:** –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è Preview-–æ–∫—Ä—É–∂–µ–Ω–∏—è Vercel, –≤—ã–ø–æ–ª–Ω–∏—Ç—å –¥–µ–ø–ª–æ–π —Ç–µ—Å—Ç–æ–≤–æ–π –≤–µ—Ç–∫–∏ –∏ —É–±–µ–¥–∏—Ç—å—Å—è –≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç–µ –¥–≤—É—Ö —Ç–µ—Å—Ç–æ–≤—ã—Ö –±–æ—Ç–æ–≤.

**–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:** Vercel CLI/UI, GitHub, Git, `.vercelignore`, –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è Vercel (Preview Scope).

**–õ–µ–≥–µ–Ω–¥–∞ –°—Ç–∞—Ç—É—Å–æ–≤:**
*   ‚úÖ - –ó–∞–≤–µ—Ä—à–µ–Ω–æ
*   ‚è≥ - –í –†–∞–±–æ—Ç–µ
*   ‚ùå - –ë–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ / –û—à–∏–±–∫–∞
*   üìù - –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ

---

## üó∫Ô∏è –ü–ª–∞–Ω –î–µ–ø–ª–æ—è –¢–µ—Å—Ç–æ–≤–æ–≥–æ –û–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞ Vercel

### P1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ –î–µ–ø–ª–æ–π –¢–µ—Å—Ç–æ–≤–æ–≥–æ –û–∫—Ä—É–∂–µ–Ω–∏—è (2 –ë–æ—Ç–∞) üöÄ (–¢–µ–∫—É—â–∏–π –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç!)
*   **–°—Ç–∞—Ç—É—Å:** ‚è≥ (–í —Ä–∞–±–æ—Ç–µ - –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –õ–æ–∫–∞–ª—å–Ω–æ–µ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
*   **–¶–µ–ª—å:** –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç—å **—Ç–µ—Å—Ç–æ–≤–æ–µ** —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ **–¥–≤—É—Ö** –±–æ—Ç–æ–≤ –≤ **Preview-–æ–∫—Ä—É–∂–µ–Ω–∏–∏** Vercel.
*   **–ö–ª—é—á–µ–≤—ã–µ –ó–∞–¥–∞—á–∏:**
    *   üìù **–õ–æ–∫–∞–ª—å–Ω–æ–µ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –õ–æ–≥–∏–∫–∏ `ACTIVE_BOTS`:**
        *   üìù –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–π `.env` —Å `NODE_ENV=production` –∏ `ACTIVE_BOTS` –¥–ª—è 2—Ö –±–æ—Ç–æ–≤.
        *   üìù –ó–∞–ø—É—Å—Ç–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ (`pnpm build && node dist/bot.js`).
        *   üìù –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç –∑–∞–ø—É—Å–∫–∞ —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã—Ö –±–æ—Ç–æ–≤.
    *   üìù **–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ Git:**
        *   üìù –°–æ–∑–¥–∞—Ç—å –∏ –∑–∞–ø—É—à–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—É—é –≤–µ—Ç–∫—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, `testing`).
    *   üìù **(–ó–∞–¥–∞—á–∞ –ì—É—Ä—É) –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Vercel Project & Preview Environment:**
        *   üìù –ü–æ–¥–∫–ª—é—á–∏—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π GitHub –∫ –Ω–æ–≤–æ–º—É Vercel –ø—Ä–æ–µ–∫—Ç—É.
        *   üìù –í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö Vercel -> Environment Variables –¥–æ–±–∞–≤–∏—Ç—å:
            *   –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —Ç–æ–∫–µ–Ω–æ–≤ 2—Ö —Ç–µ—Å—Ç–æ–≤—ã—Ö –±–æ—Ç–æ–≤ (Scope: Preview).
            *   –ü–µ—Ä–µ–º–µ–Ω–Ω—É—é `ACTIVE_BOTS` —Å–æ —Å–ø–∏—Å–∫–æ–º –∏–º–µ–Ω –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤—ã—Ö –±–æ—Ç–æ–≤ (Scope: Preview).
            *   –í—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (`SUPABASE_*`, `SECRET_API_KEY` –∏ —Ç.–¥.) (Scope: Preview).
    *   üìù **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –°–±–æ—Ä–∫–∏ Vercel:**
        *   üìù –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ Vercel –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∫–æ–º–∞–Ω–¥—É —Å–±–æ—Ä–∫–∏ (`pnpm build`) –∏ –≤—ã—Ö–æ–¥–Ω—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é (`dist`).
        *   üìù –ü—Ä–æ–≤–µ—Ä–∏—Ç—å/—Å–æ–∑–¥–∞—Ç—å `.vercelignore` (‚úÖ —É–∂–µ —Å–¥–µ–ª–∞–Ω–æ).
        *   üìù (–ï—Å–ª–∏ –Ω—É–∂–Ω–æ) –°–æ–∑–¥–∞—Ç—å `vercel.json` –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–æ—É—Ç–∏–Ω–≥–∞ Serverless Function (`/api/webhook/:botId`).
    *   üìù **–î–µ–ø–ª–æ–π Preview Environment:**
        *   üìù Vercel –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–¥–µ–ø–ª–æ–∏—Ç —Ç–µ—Å—Ç–æ–≤—É—é –≤–µ—Ç–∫—É.
        *   üìù –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ —Å–±–æ—Ä–∫–∏ –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤ Vercel.
    *   üìù **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram Webhook (–¥–ª—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –±–æ—Ç–æ–≤):**
        *   üìù –ü–æ–ª—É—á–∏—Ç—å Preview URL –æ—Ç Vercel.
        *   üìù –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤–µ–±—Ö—É–∫–∏ –¥–ª—è –¥–≤—É—Ö —Ç–µ—Å—Ç–æ–≤—ã—Ö –±–æ—Ç–æ–≤ –Ω–∞ `https://<preview-url>/api/webhook/<bot_id>`.
    *   üìù **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¢–µ—Å—Ç–æ–≤–æ–≥–æ –û–∫—Ä—É–∂–µ–Ω–∏—è:**
        *   üìù –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ —Ç–µ—Å—Ç–æ–≤—ã—Ö –±–æ—Ç–æ–≤ –Ω–∞ Preview URL.
