---
description: 
globs: 
alwaysApply: true
---
# üïâÔ∏è –¢–µ–∫—É—â–∞—è –ó–∞–¥–∞—á–∞: ‚ú® –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –í—ã–∑–æ–≤–æ–≤ API_URL –Ω–∞ –õ–æ–∫–∞–ª—å–Ω—ã–π Plan B + üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Plan B

*   **üéØ –ì–ª–∞–≤–Ω–∞—è –¶–µ–ª—å:** –ü–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ç–∫–∞–∑–∞—Ç—å—Å—è –æ—Ç –≤—ã–∑–æ–≤–æ–≤ –≤–Ω–µ—à–Ω–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ (`API_URL`), –∑–∞–º–µ–Ω–∏–≤ –∏—Ö –Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π –∏–∑ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `src/services/plan_b`.
*   **–°—Ç—Ä–∞—Ç–µ–≥–∏—è:** –í—Å—è –ª–æ–≥–∏–∫–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è **–ª–æ–∫–∞–ª—å–Ω–æ**. –§—É–Ω–∫—Ü–∏–∏ –≤ `src/services/plan_b` - —ç—Ç–∞–ª–æ–Ω–Ω—ã–µ –ª–æ–∫–∞–ª—å–Ω—ã–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏.
*   **üíæ –ü—Ä–∞–≤–∏–ª–æ –ö–æ–º–º–∏—Ç–∞:** –ü–æ—Å–ª–µ **—É—Å–ø–µ—à–Ω–æ–≥–æ** –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è **–∫–∞–∂–¥–æ–π** –∑–∞–¥–∞—á–∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ –∏–ª–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û** –≤—ã–ø–æ–ª–Ω—è—Ç—å –∫–æ–º–º–∏—Ç.
*   **–ö–æ–Ω—Ç–µ–∫—Å—Ç:**
    *   ‚úÖ –°—Ç—Ä–∞—Ç–µ–≥–∏—è `api-server` –æ—Ç–º–µ–Ω–µ–Ω–∞ –≤ –ø–æ–ª—å–∑—É –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ `plan_b`.
    *   ‚úÖ –¢–µ—Å—Ç—ã –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã —Å Vitest –Ω–∞ Bun Test.
    *   ‚úÖ –ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã —Å–ª–∏—è–Ω–∏—è —Ä–∞–∑—Ä–µ—à–µ–Ω—ã.
    *   ‚úÖ –û—Å–Ω–æ–≤–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã `plan_b` –ø–æ–∫—Ä—ã—Ç—ã —Ç–µ—Å—Ç–∞–º–∏.
    *   ‚úÖ –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã (`telegram-bot.interface.ts`) –≤–æ–∑–≤—Ä–∞—â–µ–Ω—ã –∫ —Å—Ç–∞–±–∏–ª—å–Ω–æ–º—É —Å–æ—Å—Ç–æ—è–Ω–∏—é.
*   **–ü–ª–∞–Ω –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ (–ó–∞–º–µ–Ω–∞ API_URL -> plan_b):**
    1.  ‚úÖ `src/services/generateVoiceAvatar.ts` -> `plan_b/createVoiceAvatar.ts` (–¢–µ—Å—Ç Plan B ‚úÖ).
    2.  ‚úÖ `src/services/generateTextToImage.ts` -> `plan_b/generateTextToImage.ts` (–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∑–∞–≤–µ—Ä—à–µ–Ω ‚úÖ).
    3.  ‚úÖ `src/services/generateTextToVideo.ts` -> `plan_b/generateTextToVideo.ts` (–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∑–∞–≤–µ—Ä—à–µ–Ω ‚úÖ, —Ç—Ä–µ–±—É–µ—Ç —Ç–µ—Å—Ç–∞).
    4.  ‚úÖ `src/services/generateImageToVideo.ts` -> `plan_b/generateImageToVideo.ts` (–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∑–∞–≤–µ—Ä—à–µ–Ω ‚úÖ, —Ç—Ä–µ–±—É–µ—Ç —Ç–µ—Å—Ç–∞).
    5.  ‚úÖ `src/services/generateLipSync.ts` -> `plan_b/generateLipSync.ts` (–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∑–∞–≤–µ—Ä—à–µ–Ω ‚úÖ, –¢–µ—Å—Ç Plan B ‚úÖ).
    6.  ‚úÖ `src/services/generateTextToSpeech.ts` -> `plan_b/generateSpeech.ts` (–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∑–∞–≤–µ—Ä—à–µ–Ω ‚úÖ, –¢–µ—Å—Ç Plan B ‚úÖ).
    7.  ‚úèÔ∏è `src/services/uploadVideoToServer.ts` -> `plan_b/videoService.ts` (–¢–µ—Å—Ç Plan B ‚úÖ).
    8.  ‚úèÔ∏è `src/services/createModelTraining.ts` -> (–¢—Ä–µ–±—É–µ—Ç –∞–Ω–∞–ª–∏–∑–∞, –µ—Å—Ç—å –ª–∏ –∞–Ω–∞–ª–æ–≥ –≤ Plan B –∏–ª–∏ –Ω—É–∂–Ω–∞ –Ω–æ–≤–∞—è –ª–æ–∫–∞–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è).
    9.  ‚úèÔ∏è `src/services/generateNeuroImageV2.ts` -> (–¢—Ä–µ–±—É–µ—Ç –∞–Ω–∞–ª–∏–∑–∞, –µ—Å—Ç—å –ª–∏ –∞–Ω–∞–ª–æ–≥ –≤ Plan B –∏–ª–∏ –Ω—É–∂–Ω–∞ –Ω–æ–≤–∞—è –ª–æ–∫–∞–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è).
    10. ‚úèÔ∏è `src/core/synclabs/generateLipSync/index.ts` (–≤–µ–±—Ö—É–∫) -> (–¢—Ä–µ–±—É–µ—Ç –∞–Ω–∞–ª–∏–∑–∞, –∫–∞–∫ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –≤–µ–±—Ö—É–∫–∏ –ª–æ–∫–∞–ª—å–Ω–æ, –≤–æ–∑–º–æ–∂–Ω–æ, —á–µ—Ä–µ–∑ `api-server.ts`?)
*   **–ü–ª–∞–Ω –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è Plan B (TDD):**
    *   ‚úÖ `aiAssistantService.ts`
    *   ‚úÖ `notification.service.ts`
    *   ‚úÖ `avatar.service.ts`.
    *   ‚úÖ `createVoiceAvatar.ts`
    *   ‚úÖ `generateSpeech.ts`
    *   ‚úÖ `generateLipSync.ts`
    *   ‚úÖ `generateImageToPrompt.ts`
    *   ‚úÖ `videoService.ts`
    *   üöß `generateTextToImage.ts` (–¢–µ—Å—Ç –≤—Ä–µ–º–µ–Ω–Ω–æ –ø—Ä–æ–ø—É—â–µ–Ω - `it.skip`).
    *   ‚úèÔ∏è `generateTextToVideo.ts` (–ù–∞–ø–∏—Å–∞—Ç—å/–∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–µ—Å—Ç).
    *   ‚úèÔ∏è `generateImageToVideo.ts` (–ù–∞–ø–∏—Å–∞—Ç—å/–∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–µ—Å—Ç).
    *   (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) `broadcast.service.ts`
*   **–ó–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ –§–∞–π–ª—ã (–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥):**
    *   ‚úèÔ∏è `src/services/uploadVideoToServer.ts` (–ü—Ä–æ—á–∏—Ç–∞—Ç—å –¥–ª—è —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞)
    *   ‚úèÔ∏è `src/services/plan_b/videoService.ts` (–≠—Ç–∞–ª–æ–Ω–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è)
    *   ‚úèÔ∏è `.cursor/rules/current-task.mdc` (–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ)
*   **–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ `generateTextToSpeech.ts` –∑–∞–≤–µ—Ä—à–µ–Ω. ‚è≥ **(–ê–∫—Ç–∏–≤–Ω–æ!)** –ü–µ—Ä–µ—Ö–æ–¥ –∫ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥—É `src/services/uploadVideoToServer.ts`.

---
*–û–º –®–∞–Ω—Ç–∏. –ü—É—Ç—å —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è.* üôè
