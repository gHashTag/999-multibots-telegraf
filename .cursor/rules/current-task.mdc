---
description: 
globs: 
alwaysApply: true
---
# üïâÔ∏è –¢–µ–∫—É—â–∞—è –ó–∞–¥–∞—á–∞: –õ–æ–∫–∞–ª—å–Ω–æ–µ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ü–æ—Å–ª–µ –ü–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –°–ª–∏—è–Ω–∏—è (testing + fix/core-functions) ‚öôÔ∏è

**–ü—Ä–∏–Ω—Ü–∏–ø:** –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –∫–æ–¥, –æ–±—ä–µ–¥–∏–Ω–µ–Ω–Ω—ã–π *–ø–æ—Å–ª–µ –≤—Ç–æ—Ä–æ–≥–æ —Å–ª–∏—è–Ω–∏—è* –≤–µ—Ç–æ–∫ `testing` –∏ `fix/core-functions`, –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ.

**–¶–µ–ª—å:** –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–µ–∫—Ç –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (`pnpm dev`) –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –±–æ—Ç–æ–≤ —Å –ø–æ—Å–ª–µ–¥–Ω–∏–º–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏ –∏–∑ `fix/core-functions`.

<<<<<<< HEAD
**–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:** Git, pnpm, Vite, –õ–æ–∫–∞–ª—å–Ω–∞—è –∫–æ–Ω—Å–æ–ª—å.

**–õ–µ–≥–µ–Ω–¥–∞ –°—Ç–∞—Ç—É—Å–æ–≤:**
*   ‚úÖ - –ó–∞–≤–µ—Ä—à–µ–Ω–æ
*   ‚è≥ - –í –†–∞–±–æ—Ç–µ
*   ‚ùå - –ë–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ / –û—à–∏–±–∫–∞
*   üìù - –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ

---

## üó∫Ô∏è –ü–ª–∞–Ω –†–∞–±–æ—Ç

### P1: –ü–µ—Ä–≤–æ–µ –°–ª–∏—è–Ω–∏–µ –∏ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –°–±–æ—Ä–∫–∏ (testing + fix/core-functions)
*   **–°—Ç–∞—Ç—É—Å:** ‚úÖ (–ó–∞–≤–µ—Ä—à–µ–Ω–æ)
*   **–¶–µ–ª—å:** –í–ª–∏—Ç—å –≤–µ—Ç–∫—É `fix/core-functions`, —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å `src`, –∏—Å–ø—Ä–∞–≤–∏—Ç—å –æ—à–∏–±–∫–∏ —Å–±–æ—Ä–∫–∏.
*   **–ö–ª—é—á–µ–≤—ã–µ –ó–∞–¥–∞—á–∏:**
    *   ‚úÖ –°–ª–∏—è–Ω–∏–µ –≤–µ—Ç–æ–∫.
    *   ‚úÖ –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤.
    *   ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.
    *   ‚úÖ –û—Å–ª–∞–±–ª–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª TypeScript.
    *   ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ –∏–º–ø–æ—Ä—Ç–∞/—ç–∫—Å–ø–æ—Ä—Ç–∞.
    *   ‚úÖ –£—Å–ø–µ—à–Ω–∞—è –ø–µ—Ä–≤–∞—è —Å–±–æ—Ä–∫–∞.

### P1.5: –í—Ç–æ—Ä–æ–µ –°–ª–∏—è–Ω–∏–µ (testing + fix/core-functions)
*   **–°—Ç–∞—Ç—É—Å:** ‚úÖ (–ó–∞–≤–µ—Ä—à–µ–Ω–æ)
*   **–¶–µ–ª—å:** –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏–∑ `fix/core-functions`, —Å–æ—Ö—Ä–∞–Ω—è—è –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã.
*   **–ö–ª—é—á–µ–≤—ã–µ –ó–∞–¥–∞—á–∏:**
    *   ‚úÖ –§–∏–∫—Å–∞—Ü–∏—è –ª–æ–∫–∞–ª—å–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π.
    *   ‚úÖ –ü–æ–≤—Ç–æ—Ä–Ω–æ–µ —Å–ª–∏—è–Ω–∏–µ –≤–µ—Ç–æ–∫ —Å —Ç–æ–π –∂–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–µ–π.
    *   ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.
    *   ‚úÖ –£—Å–ø–µ—à–Ω–∞—è –≤—Ç–æ—Ä–∞—è —Å–±–æ—Ä–∫–∞.

### P2: –õ–æ–∫–∞–ª—å–Ω–æ–µ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ó–∞–ø—É—Å–∫–∞ (–¢–µ–∫—É—â–∏–π –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç!)
*   **–°—Ç–∞—Ç—É—Å:** ‚è≥ (–û–∂–∏–¥–∞–µ—Ç –ó–∞–ø—É—Å–∫–∞)
*   **–¶–µ–ª—å:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–ø—É—Å–∫ *–∞–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ* –æ–±—ä–µ–¥–∏–Ω–µ–Ω–Ω–æ–≥–æ –∫–æ–¥–∞ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.
*   **–ö–ª—é—á–µ–≤—ã–µ –ó–∞–¥–∞—á–∏:**
    *   üìù –ó–∞–ø—É—Å—Ç–∏—Ç—å `pnpm dev`.
    *   üìù –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏ –∑–∞–ø—É—Å–∫–∞ –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç –æ—à–∏–±–æ–∫ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –±–æ—Ç–æ–≤ –∏ –¥—Ä—É–≥–∏—Ö –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º.

### P3: (–°–ª–µ–¥—É—é—â–∏–π –®–∞–≥) –î–µ–ø–ª–æ–π...
*   **–°—Ç–∞—Ç—É—Å:** üìù (–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ)
*   **–¶–µ–ª—å:** –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å —Ä–∞–±–æ—á—É—é –≤–µ—Ä—Å–∏—é (–º–µ—Ç–æ–¥ –¥–µ–ø–ª–æ—è —É—Ç–æ—á–Ω—è–µ—Ç—Å—è - Docker/—Å–µ—Ä–≤–µ—Ä).
=======
**–¢–µ–∫—É—â–∞—è –ó–∞–¥–∞—á–∞:** üéØ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ì–µ–Ω–¥–µ—Ä–∞ –ê–≤–∞—Ç–∞—Ä–∞ –≤ –ü—Ä–æ–º–ø—Ç—ã GPT –∏ –ü—Ä–æ—Ü–µ—Å—Å –°–æ–∑–¥–∞–Ω–∏—è –ê–≤–∞—Ç–∞—Ä–∞

*   **–ö–æ–Ω—Ç–µ–∫—Å—Ç:** –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–æ–±–∞–≤–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª–µ –≤–ª–∞–¥–µ–ª—å—Ü–∞ –±–æ—Ç–∞ (–ê–≤–∞—Ç–∞—Ä–∞) –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (`users` —Ç–∞–±–ª–∏—Ü–∞), –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–µ –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –ø—Ä–æ–º–ø—Ç–∞ GPT –∏ –¥–æ–±–∞–≤–∏—Ç—å —à–∞–≥ –≤—ã–±–æ—Ä–∞ –ø–æ–ª–∞ –≤ –ø—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è —Ü–∏—Ñ—Ä–æ–≤–æ–≥–æ —Ç–µ–ª–∞ –∞–≤–∞—Ç–∞—Ä–∞.
*   **–ü—Ä–æ–±–ª–µ–º–∞:**
    1.  GPT –æ—Ç–≤–µ—á–∞–µ—Ç –æ—Ç –±–µ–∑–ª–∏—á–Ω–æ–≥–æ –∏–ª–∏ –∑–∞–¥–∞–Ω–Ω–æ–≥–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –ª–∏—Ü–∞.
    2.  –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∞–≤–∞—Ç–∞—Ä–∞ –ø–æ–ª –Ω–µ —É–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è.
*   **–¶–µ–ª—å:**
    1.  –î–æ–±–∞–≤–∏—Ç—å —Å—Ç–æ–ª–±–µ—Ü `gender TEXT` –≤ —Ç–∞–±–ª–∏—Ü—É `users`.
    2.  –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–¥ (`getUserData`) –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —ç—Ç–æ–≥–æ –ø–æ–ª—è –∏–∑ –ë–î.
    3.  –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç GPT –≤ `handleTextMessage` –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –≤–∫–ª—é—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª–µ.
    4.  –î–æ–±–∞–≤–∏—Ç—å —à–∞–≥ –≤—ã–±–æ—Ä–∞ –ø–æ–ª–∞ –≤ –º–∞—Å—Ç–µ—Ä —Å–æ–∑–¥–∞–Ω–∏—è —Ü–∏—Ñ—Ä–æ–≤–æ–≥–æ —Ç–µ–ª–∞ –∞–≤–∞—Ç–∞—Ä–∞.
    5.  –°–æ—Ö—Ä–∞–Ω—è—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–π –ø–æ–ª –≤ —Ç–∞–±–ª–∏—Ü—É `users` –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∞–≤–∞—Ç–∞—Ä–∞.
*   **–ó–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ –§–∞–π–ª—ã (–ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ):**
    *   SQL-–∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ç–∞–±–ª–∏—Ü `avatars` (–æ—Ç–∫–∞—Ç) –∏ `users`.
    *   `src/core/supabase/getUserData.ts` (–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞)
    *   `src/handlers/handleTextMessage/index.ts` (–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–∞)
    *   `src/scenes/digitalAvatarBodyWizard/index.ts` (–∏–ª–∏ V2) (–î–æ–±–∞–≤–ª–µ–Ω–∏–µ —à–∞–≥–∞ –≤—ã–±–æ—Ä–∞ –ø–æ–ª–∞)
*   **–°—Ç–∞—Ç—É—Å:** ‚è≥ –í –†–∞–±–æ—Ç–µ (–û—Ç–∫–∞—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è `avatars`)

---
*–û–º –®–∞–Ω—Ç–∏. –î–∞ –æ–±—Ä–µ—Ç–µ—Ç –±–æ—Ç —Å–≤–æ—é –∏—Å—Ç–∏–Ω–Ω—É—é —Ñ–æ—Ä–º—É –∏ –ø–æ–ª.* üôè
>>>>>>> origin/feat/vitest-integration
