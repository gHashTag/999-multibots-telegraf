---
description: 
globs: 
alwaysApply: true
---
# üïâÔ∏è –¢–µ–∫—É—â–∞—è –ó–∞–¥–∞—á–∞: –ù–µ–π—Ä–æ–ö–æ–¥–µ—Ä

**–ü—Ä–∏–Ω—Ü–∏–ø:** –°–æ—Å—Ä–µ–¥–æ—Ç–æ—á–µ–Ω–∏–µ –Ω–∞ –æ–¥–Ω–æ–π –∑–∞–¥–∞—á–µ –≤ –∫–∞–∂–¥—ã–π –º–æ–º–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏ –≤–µ–¥–µ—Ç –∫ —è—Å–Ω–æ—Å—Ç–∏ –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏. –≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ—Ç—Ä–∞–∂–∞–µ—Ç —Ç–µ–∫—É—â–∏–π —Ñ–æ–∫—É—Å —Ä–∞–±–æ—Ç—ã.

**–î–∞—Ç–∞ –û–±–Ω–æ–≤–ª–µ–Ω–∏—è:** {current_date}

**–¢–µ–∫—É—â–∞—è –ó–∞–¥–∞—á–∞:** üéØ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ì–µ–Ω–¥–µ—Ä–∞ –ê–≤–∞—Ç–∞—Ä–∞ –≤ –ü—Ä–æ–º–ø—Ç—ã GPT –∏ –ü—Ä–æ—Ü–µ—Å—Å –°–æ–∑–¥–∞–Ω–∏—è –ê–≤–∞—Ç–∞—Ä–∞

*   **–ö–æ–Ω—Ç–µ–∫—Å—Ç:** –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–æ–±–∞–≤–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª–µ –≤–ª–∞–¥–µ–ª—å—Ü–∞ –±–æ—Ç–∞ (–ê–≤–∞—Ç–∞—Ä–∞) –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (`users` —Ç–∞–±–ª–∏—Ü–∞), –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–µ –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –ø—Ä–æ–º–ø—Ç–∞ GPT –∏ –¥–æ–±–∞–≤–∏—Ç—å —à–∞–≥ –≤—ã–±–æ—Ä–∞ –ø–æ–ª–∞ –≤ –ø—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è —Ü–∏—Ñ—Ä–æ–≤–æ–≥–æ —Ç–µ–ª–∞ –∞–≤–∞—Ç–∞—Ä–∞.
*   **–ü—Ä–æ–±–ª–µ–º–∞:**
    1.  GPT –æ—Ç–≤–µ—á–∞–µ—Ç –æ—Ç –±–µ–∑–ª–∏—á–Ω–æ–≥–æ –∏–ª–∏ –∑–∞–¥–∞–Ω–Ω–æ–≥–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –ª–∏—Ü–∞.
    2.  –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∞–≤–∞—Ç–∞—Ä–∞ –ø–æ–ª –Ω–µ —É–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è.
*   **–¶–µ–ª—å:**
    1.  –î–æ–±–∞–≤–∏—Ç—å —Å—Ç–æ–ª–±–µ—Ü `gender TEXT` –≤ —Ç–∞–±–ª–∏—Ü—É `users`.
    2.  –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–¥ (`getUserData`) –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —ç—Ç–æ–≥–æ –ø–æ–ª—è –∏–∑ –ë–î.
    3.  –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç GPT –≤ `handleTextMessage` –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –≤–∫–ª—é—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª–µ.
    4.  –î–æ–±–∞–≤–∏—Ç—å —à–∞–≥ –≤—ã–±–æ—Ä–∞ –ø–æ–ª–∞ –≤ –º–∞—Å—Ç–µ—Ä —Å–æ–∑–¥–∞–Ω–∏—è —Ü–∏—Ñ—Ä–æ–≤–æ–≥–æ —Ç–µ–ª–∞ –∞–≤–∞—Ç–∞—Ä–∞.
    5.  –°–æ—Ö—Ä–∞–Ω—è—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–π –ø–æ–ª –≤ —Ç–∞–±–ª–∏—Ü—É `users` –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∞–≤–∞—Ç–∞—Ä–∞.
*   **–ó–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ –§–∞–π–ª—ã (–ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ):**
    *   SQL-–∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ç–∞–±–ª–∏—Ü `avatars` (–æ—Ç–∫–∞—Ç) –∏ `users`.
    *   `src/core/supabase/getUserData.ts` (–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞)
    *   `src/handlers/handleTextMessage/index.ts` (–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–∞)
    *   `src/scenes/digitalAvatarBodyWizard/index.ts` (–∏–ª–∏ V2) (–î–æ–±–∞–≤–ª–µ–Ω–∏–µ —à–∞–≥–∞ –≤—ã–±–æ—Ä–∞ –ø–æ–ª–∞)
*   **–°—Ç–∞—Ç—É—Å:** ‚è≥ –í –†–∞–±–æ—Ç–µ (–û—Ç–∫–∞—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è `avatars`)

---
*–û–º –®–∞–Ω—Ç–∏. –î–∞ –æ–±—Ä–µ—Ç–µ—Ç –±–æ—Ç —Å–≤–æ—é –∏—Å—Ç–∏–Ω–Ω—É—é —Ñ–æ—Ä–º—É –∏ –ø–æ–ª.* üôè
