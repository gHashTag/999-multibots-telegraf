# NeuroBlogger - –ú—É–ª—å—Ç–∏–±–æ—Ç —Å–∏—Å—Ç–µ–º–∞ –Ω–∞ Telegraf

–ú–Ω–æ–≥–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ Telegram-–±–æ—Ç–∞–º–∏ —á–µ—Ä–µ–∑ –æ–¥–∏–Ω —Å–µ—Ä–≤–µ—Ä —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∫–∞–∫ webhook, —Ç–∞–∫ –∏ long-polling —Ä–µ–∂–∏–º–æ–≤.

## üìã –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- ü§ñ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –±–æ—Ç–æ–≤ –∏–∑ –æ–¥–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- üîê –£–ª—É—á—à–µ–Ω–Ω–∞—è –∏–∑–æ–ª—è—Ü–∏—è –±–æ—Ç–æ–≤ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- üìä –†–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
- üîÑ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ webhook –∏ long-polling —Ä–µ–∂–∏–º–æ–≤
- üöÄ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Supabase –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–æ–≤ –±–æ—Ç–æ–≤
- üê≥ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è –¥–ª—è –ø—Ä–æ—Å—Ç–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- [Node.js](https://nodejs.org/) - JavaScript runtime
- [TypeScript](https://www.typescriptlang.org/) - –¢–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π JavaScript
- [Telegraf](https://telegraf.js.org/) - Telegram Bot Framework
- [Supabase](https://supabase.com/) - –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ –±–æ—Ç–æ–≤
- [Docker](https://www.docker.com/) - –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è
- [Nginx](https://nginx.org/) - –ü—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä –¥–ª—è webhook

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
npm install

# –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Å hot-reload
npm run dev
```

### –ß–µ—Ä–µ–∑ Docker

```bash
# –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
docker-compose -f docker-compose.dev.yml up

# –ó–∞–ø—É—Å–∫ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
docker-compose up -d
```

## üî® –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
.
‚îú‚îÄ‚îÄ src/                      # –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥
‚îÇ   ‚îú‚îÄ‚îÄ core/                 # –ë–∞–∑–æ–≤—ã–µ –º–æ–¥—É–ª–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ bot/              # –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –±–æ—Ç–æ–≤
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ supabase/         # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Supabase
‚îÇ   ‚îú‚îÄ‚îÄ utils/                # –£—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ launch.ts         # –õ–æ–≥–∏–∫–∞ –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ interfaces/           # TypeScript –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
‚îÇ   ‚îú‚îÄ‚îÄ scenes/               # –°—Ü–µ–Ω—ã –¥–ª—è –±–æ—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ multi.ts              # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–ª—è —Ä–µ–∂–∏–º–∞ long polling
‚îÇ   ‚îî‚îÄ‚îÄ webhook.ts            # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–ª—è —Ä–µ–∂–∏–º–∞ webhook
‚îú‚îÄ‚îÄ docker-compose.yml        # –û—Å–Ω–æ–≤–Ω–∞—è Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ Dockerfile                # –û—Å–Ω–æ–≤–Ω–æ–π Docker –æ–±—Ä–∞–∑ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
‚îú‚îÄ‚îÄ tsconfig.json             # TypeScript –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îî‚îÄ‚îÄ ROADMAP.md                # Roadmap –ø—Ä–æ–µ–∫—Ç–∞
```

## üê≥ Docker —Ñ–∞–π–ª—ã

| –§–∞–π–ª | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------|------------|
| Dockerfile | –û—Å–Ω–æ–≤–Ω–æ–π –æ–±—Ä–∞–∑ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ |
| Dockerfile.dev | –û–±—Ä–∞–∑ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ |
| Dockerfile.test | –û–±—Ä–∞–∑ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è |
| docker-compose.yml | –û—Å–Ω–æ–≤–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è |
| docker-compose.dev.yml | –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ |
| docker-compose.multi.yml | –î–ª—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –±–æ—Ç–æ–≤ |
| docker-compose.test.yml | –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è |
| docker-compose.webhook.yml | –î–ª—è webhook —Ä–µ–∂–∏–º–∞ |

## üìã –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–∏–º–µ—Ä–∞:

```
# –¢–æ–∫–µ–Ω—ã –±–æ—Ç–æ–≤
BOT_TOKEN_1=1234567890:AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
BOT_TOKEN_2=0987654321:BBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBB

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞
PORT=3000
ORIGIN=https://your-domain.com

# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
SUPABASE_URL=your-supabase-url
SUPABASE_SERVICE_KEY=your-supabase-key
```

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–î–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –∏ –¥–µ–ø–ª–æ–µ –ø—Ä–æ–µ–∫—Ç–∞ —Å–º–æ—Ç—Ä–∏—Ç–µ:

- [ROADMAP.md](ROADMAP.md) - –ü–ª–∞–Ω —Ä–∞–∑–≤–∏—Ç–∏—è –ø—Ä–æ–µ–∫—Ç–∞
- [DEPLOYMENT.md](DEPLOYMENT.md) - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –¥–µ–ø–ª–æ—é

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
npm test

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ —á–µ—Ä–µ–∑ Docker
docker-compose -f docker-compose.test.yml up
```

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π MIT. –ü–æ–¥—Ä–æ–±–Ω–µ–µ —Å–º. –≤ —Ñ–∞–π–ª–µ LICENSE.

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Nginx

**–í–ê–ñ–ù–û:** –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Nginx –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ñ–∞–π–ª–µ `nginx/nginx.conf`

### –†–∞–±–æ—á–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Nginx

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –µ–¥–∏–Ω—É—é –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Nginx, –∫–æ—Ç–æ—Ä–∞—è –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—é –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –º–Ω–æ–∂–µ—Å—Ç–≤—É –±–æ—Ç–æ–≤ Telegram.

```nginx
# –í–ù–ò–ú–ê–ù–ò–ï: –≠–¢–û –ï–î–ò–ù–°–¢–í–ï–ù–ù–ê–Ø –†–ê–ë–û–ß–ê–Ø –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø
# –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö

server {
    listen 80;
    listen 443 ssl;
    server_name _;

    ssl_certificate /etc/pki/cert.crt;
    ssl_certificate_key /etc/pki/key.pem;

    # –û—Å–Ω–æ–≤–Ω–æ–π –ø–æ—Ä—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
    location / {
        proxy_pass http://app:2999;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
        proxy_set_header X-Real-IP $remote_addr;
    }

    # neuro_blogger_bot - –ø–æ—Ä—Ç 3001
    location /neuro_blogger_bot {
        proxy_pass http://app:3001;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }

    # –ò –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–µ –±–ª–æ–∫–∏ –¥–ª—è –¥—Ä—É–≥–∏—Ö –±–æ—Ç–æ–≤...
}
```

### –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

1. **–ü—Ä—è–º–æ–µ –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑ —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–≤:**
   - Telegram API –Ω–µ —Å–ª–µ–¥—É–µ—Ç —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞–º (HTTP 301/302) –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –≤–µ–±—Ö—É–∫–æ–≤
   - –ö–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å –∫ `/bot_name` –Ω–∞–ø—Ä—è–º—É—é –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç—Å—è –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –ø–æ—Ä—Ç

2. **–ò–∑–æ–ª—è—Ü–∏—è –±–æ—Ç–æ–≤:**
   - –ö–∞–∂–¥—ã–π –±–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ —Å–≤–æ–µ–º –ø–æ—Ä—Ç—É (3001-3007)
   - –ü—Ä–æ–±–ª–µ–º—ã —Å –æ–¥–Ω–∏–º –±–æ—Ç–æ–º –Ω–µ –≤–ª–∏—è—é—Ç –Ω–∞ —Ä–∞–±–æ—Ç—É –¥—Ä—É–≥–∏—Ö

3. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ docker-compose.yml**
   ```yaml
   volumes:
     - ./nginx/nginx.conf:/etc/nginx/conf.d/default.conf:ro
   ```

‚ö†Ô∏è **–í–ù–ò–ú–ê–ù–ò–ï:** –ù–µ —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Nginx. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤–Ω–µ—Å–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –æ–±–Ω–æ–≤–ª—è–π—Ç–µ —Ç–æ–ª—å–∫–æ —Ñ–∞–π–ª `nginx/nginx.conf` –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è.