# üß™ –°–∏—Å—Ç–µ–º–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞ NeuroBlogger

## –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—É—é —Å–∏—Å—Ç–µ–º—É —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –æ—Å–Ω–æ–≤–∞–Ω–Ω—É—é –Ω–∞ –º–æ–¥—É–ª–µ `src/test-utils`. 
–í—Å–µ —Ç–µ—Å—Ç—ã –¥–æ–ª–∂–Ω—ã —Å–ª–µ–¥–æ–≤–∞—Ç—å –ø—Ä–∏–Ω—Ü–∏–ø–∞–º –∏ –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º, –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º –≤ —ç—Ç–æ–º –º–æ–¥—É–ª–µ.

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

1. –ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **—Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**, —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–Ω—ã–π –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `src/test-utils`
2. **–ù–ï** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Jest –∏–ª–∏ –¥—Ä—É–≥–∏–µ —Å—Ç–æ—Ä–æ–Ω–Ω–∏–µ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∏!
3. –í—Å–µ —Ç–µ—Å—Ç—ã –¥–æ–ª–∂–Ω—ã –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –æ–±—ä–µ–∫—Ç —Ç–∏–ø–∞ `TestResult`
4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ª–æ–≥–≥–µ—Ä —Å —ç–º–æ–¥–∑–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏ –ª–æ–≥–æ–≤

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤

–í—Å–µ —Ç–µ—Å—Ç—ã –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `src/test-utils/tests/` –∏ —Ä–∞–∑–¥–µ–ª–µ–Ω—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º:

- `payment` - —Ç–µ—Å—Ç—ã –ø–ª–∞—Ç–µ–∂–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã
- `telegram` - —Ç–µ—Å—Ç—ã —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ Telegram-–±–æ—Ç–∞
- `inngest` - —Ç–µ—Å—Ç—ã –¥–ª—è —Å–æ–±—ã—Ç–∏–π–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã Inngest
- –∏ –¥—Ä—É–≥–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏

–ò—Å–ø–æ–ª–Ω—è–µ–º—ã–µ —Å–∫—Ä–∏–ø—Ç—ã –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö –ø–æ–¥–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è—Ö:

- `src/test-utils/payment/` - —Å–∫—Ä–∏–ø—Ç—ã –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤ –ø–ª–∞—Ç–µ–∂–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã
- `src/test-utils/telegram/` - —Å–∫—Ä–∏–ø—Ç—ã –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤ Telegram-–±–æ—Ç–∞
- –∏ —Ç.–¥.

## üóÇÔ∏è –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–µ—Å—Ç–æ–≤

–í —Å–∏—Å—Ç–µ–º–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏:

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –ö–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----------|-----|----------|
| –í—Å–µ —Ç–µ—Å—Ç—ã | `all` | –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤ |
| –ù–µ–π—Ä–æ | `neuro` | –¢–µ—Å—Ç—ã –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏ –≤–∏–¥–µ–æ |
| –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö | `database` | –¢–µ—Å—Ç—ã Supabase –∏ –æ–ø–µ—Ä–∞—Ü–∏–π —Å –ë–î |
| –í–µ–±—Ö—É–∫–∏ | `webhook` | –¢–µ—Å—Ç—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤–µ–±—Ö—É–∫–æ–≤ |
| Inngest | `inngest` | –¢–µ—Å—Ç—ã Inngest —Ñ—É–Ω–∫—Ü–∏–π |
| –ü–ª–∞—Ç–µ–∂–∏ | `payment` | –¢–µ—Å—Ç—ã –ø–ª–∞—Ç–µ–∂–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã |
| –†–µ—á—å | `speech` | –¢–µ—Å—Ç—ã –¥–ª—è –∞—É–¥–∏–æ —Ñ—É–Ω–∫—Ü–∏–π |
| API | `api` | –¢–µ—Å—Ç—ã REST API |
| –°–∏—Å—Ç–µ–º–∞ | `system` | –¢–µ—Å—Ç—ã —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ |

## üöÄ –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

### –ß–µ—Ä–µ–∑ NPM —Å–∫—Ä–∏–ø—Ç—ã (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Å–ø–æ—Å–æ–±)

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
npm run test:all

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–π –Ω–µ–π—Ä–æ
npm run test:neuro

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –¥–ª—è –≤–µ–±—Ö—É–∫–æ–≤
npm run test:webhook

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –¥–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
npm run test:database

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ inngest —Ñ—É–Ω–∫—Ü–∏–π
npm run test:inngest

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º –≤—ã–≤–æ–¥–æ–º
npm run test:verbose

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –ø–µ—Ä–µ–≤–æ–¥–æ–≤
npm run test:translations
```

### –ß–µ—Ä–µ–∑ –æ—Å–Ω–æ–≤–Ω—É—é —Ç–æ—á–∫—É –≤—Ö–æ–¥–∞ (index.ts)

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
npx ts-node -r tsconfig-paths/register src/test-utils/index.ts

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –Ω–µ–π—Ä–æ—Ñ–æ—Ç–æ
npx ts-node -r tsconfig-paths/register src/test-utils/index.ts --category=neuro

# –ó–∞–ø—É—Å–∫ —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º –≤—ã–≤–æ–¥–æ–º
npx ts-node -r tsconfig-paths/register src/test-utils/index.ts --verbose

# –ó–∞–ø—É—Å–∫ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π
npx ts-node -r tsconfig-paths/register src/test-utils/index.ts --category=neuro,webhook
```

## –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å TestResult

–í—Å–µ —Ç–µ—Å—Ç—ã –¥–æ–ª–∂–Ω—ã –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ —Ñ–æ—Ä–º–∞—Ç–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ TestResult:

```typescript
interface TestResult {
  success: boolean;
  message: string;
  name: string;
}
```

## –ù–∞–ø–∏—Å–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤

### –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–∞

```typescript
import { TestResult } from '../types';
import { TEST_CONFIG } from '../test-config';

export async function runMyTest(): Promise<TestResult> {
  try {
    // –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ—Å—Ç–∞
    return {
      success: true,
      message: '–¢–µ—Å—Ç —É—Å–ø–µ—à–Ω–æ –ø—Ä–æ–π–¥–µ–Ω',
      name: '–ú–æ–π —Ç–µ—Å—Ç'
    };
  } catch (error) {
    return {
      success: false,
      message: error.message,
      name: '–ú–æ–π —Ç–µ—Å—Ç'
    };
  }
}
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ mock-—Ñ—É–Ω–∫—Ü–∏–π

–í–º–µ—Å—Ç–æ Jest.Mock –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ mock-—Ñ—É–Ω–∫—Ü–∏–∏:

```typescript
const createMockFn = () => () => {};

// –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:
const mockFunction = createMockFn();
```

## üîÑ –î–≤–µ —Å–∏—Å—Ç–µ–º—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

–ü—Ä–æ–µ–∫—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¥–≤–µ —Å–∏—Å—Ç–µ–º—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –æ–±—ä–µ–¥–∏–Ω–µ–Ω—ã –≤ –µ–¥–∏–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:

1. **–ù–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞** (—á–µ—Ä–µ–∑ `runTests.ts`):
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Ñ–∞–±—Ä–∏–∫–∏ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
   - –ò–º–µ–µ—Ç –±–∞–∑–æ–≤—ã–µ –∫–ª–∞—Å—Å—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–µ—Å—Ç–µ—Ä–æ–≤
   - –õ—É—á—à–µ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω–∞ –∏ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è

2. **–û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞** (—á–µ—Ä–µ–∑ `test-runners/test-runner.test.ts`):
   - –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ç–µ—Å—Ç–æ–≤
   - –ò–º–µ–µ—Ç —Å–≤–æ–∏ —Å–ø–æ—Å–æ–±—ã –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤

–û–±–µ —Å–∏—Å—Ç–µ–º—ã –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –ø—Ä–∏ –≤—ã–∑–æ–≤–µ `index.ts`, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—å —Ç–µ—Å—Ç—ã —Å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã –Ω–∞ –Ω–æ–≤—É—é.

## –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –≤ Docker

### –°–±–æ—Ä–∫–∞ Docker-–æ–±—Ä–∞–∑–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

```bash
docker-compose -f docker-compose.test.yml build
```

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
docker-compose -f docker-compose.test.yml up -d
```

### –ó–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤ –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

```bash
docker exec neuro-blogger-telegram-bot-test npm run test:payment-processor
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

```bash
docker logs -f neuro-blogger-telegram-bot-test
```

### –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ —É–¥–∞–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
docker-compose -f docker-compose.test.yml down -v
```

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Ç–µ—Å—Ç–∞—Ö

–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–æ–ª–∂–Ω—ã –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å—Å—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —ç–º–æ–¥–∑–∏:
- ‚ÑπÔ∏è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ –ª–æ–≥–∏
- ‚úÖ –£—Å–ø–µ—à–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- ‚ùå –û—à–∏–±–∫–∏
- üöÄ –ù–∞—á–∞–ª–æ –æ–ø–µ—Ä–∞—Ü–∏–∏
- üèÅ –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ
- üîç –®–∞–≥–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- ‚ö° –°–æ–±—ã—Ç–∏—è Inngest
- üéØ –¢–µ—Å—Ç–æ–≤—ã–µ —Å–ª—É—á–∞–∏
- üîÑ –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏
- üíæ –û–ø–µ—Ä–∞—Ü–∏–∏ —Å –¥–∞–Ω–Ω—ã–º–∏

## –ó–∞–ø—Ä–µ—â–µ–Ω–Ω—ã–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ ‚õî

- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Jest –∏–ª–∏ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ Jest
- –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤ –≤–Ω–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ test-utils
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Jest –º–∞—Ç—á–µ—Ä–æ–≤ (expect, describe, it –∏ —Ç.–¥.)
- –§–∞–π–ª—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Jest
- Jest-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏ –ø–ª–∞–≥–∏–Ω—ã