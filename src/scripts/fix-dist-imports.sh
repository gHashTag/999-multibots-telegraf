#!/bin/bash

# –°–∫—Ä–∏–ø—Ç –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—É—Ç–µ–π –∏–º–ø–æ—Ä—Ç–∞ –≤ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö JavaScript —Ñ–∞–π–ª–∞—Ö
# –ó–∞–º–µ–Ω—è–µ—Ç '../src/' –Ω–∞ '../' –≤–æ –≤—Å–µ—Ö .js —Ñ–∞–π–ª–∞—Ö –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ dist

echo "üîç –ü–æ–∏—Å–∫ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö –ø—É—Ç–µ–π –∏–º–ø–æ—Ä—Ç–∞..."

# –ü–æ–∏—Å–∫ –≤—Å–µ—Ö .js —Ñ–∞–π–ª–æ–≤ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ dist –∏ –∏—Ö –ø–æ–¥–∫–∞—Ç–∞–ª–æ–≥–∞—Ö
if [ -d "dist" ]; then
  # –ò—Å–ø–æ–ª—å–∑—É–µ–º sed –¥–ª—è –∑–∞–º–µ–Ω—ã –ø—É—Ç–µ–π –∏–º–ø–æ—Ä—Ç–∞
  if [[ "$OSTYPE" == "darwin"* ]]; then
    # MacOS —Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Ñ–ª–∞–≥ -i ''
    find dist -type f -name "*.js" -exec sed -i '' 's/\.\.\/src\//\.\.\//g' {} \;
  else
    # Linux
    find dist -type f -name "*.js" -exec sed -i 's/\.\.\/src\//\.\.\//g' {} \;
  fi
  echo "‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—É—Ç–µ–π –∏–º–ø–æ—Ä—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–æ!"
else
  echo "‚ùå –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è dist –Ω–µ –Ω–∞–π–¥–µ–Ω–∞!"
  exit 1
fi 