#!/bin/bash
# –°–∫—Ä–∏–ø—Ç –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ Audio-to-Text

# –¶–≤–µ—Ç–∞ –¥–ª—è –≤—ã–≤–æ–¥–∞
GREEN='\033[0;32m'
RED='\033[0;31m'
YELLOW='\033[1;33m'
BLUE='\033[0;34m'
MAGENTA='\033[0;35m'
CYAN='\033[0;36m'
NC='\033[0m' # No Color

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Ä–µ–∂–∏–º–∞
export TEST=true
export NODE_ENV=test

# –ó–∞–≥–æ–ª–æ–≤–æ–∫
echo -e "${MAGENTA}=================================================${NC}"
echo -e "${MAGENTA}   üéôÔ∏è –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Audio-to-Text —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞   ${NC}"
echo -e "${MAGENTA}=================================================${NC}"

# –¢–µ–∫—É—â–∏–π –ø—É—Ç—å –∫ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
DIR="/Users/playom/999-multibots-telegraf/src/test-utils"

# –ó–∞–ø—É—Å–∫–∞–µ–º —Ç–µ—Å—Ç
echo -e "\n${CYAN}üß™ –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ Audio-to-Text...${NC}"
start_time=$(date +%s)

# –ò—Å–ø–æ–ª—å–∑—É–µ–º npx tsx –¥–ª—è –∑–∞–ø—É—Å–∫–∞ TypeScript —Ñ–∞–π–ª–∞
npx tsx $DIR/simplest-test-audio-to-text.ts
test_result=$?

end_time=$(date +%s)
execution_time=$((end_time - start_time))

# –í—ã–≤–æ–¥–∏–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
echo -e "${MAGENTA}=================================================${NC}"
if [ $test_result -eq 0 ]; then
  echo -e "${GREEN}‚úÖ –¢–µ—Å—Ç—ã Audio-to-Text —É—Å–ø–µ—à–Ω–æ –ø—Ä–æ–π–¥–µ–Ω—ã!${NC}"
else
  echo -e "${RED}‚ùå –¢–µ—Å—Ç—ã Audio-to-Text –∑–∞–≤–µ—Ä—à–∏–ª–∏—Å—å —Å –æ—à–∏–±–∫–∞–º–∏!${NC}"
fi
echo -e "${YELLOW}‚è±Ô∏è –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: ${execution_time} —Å–µ–∫—É–Ω–¥${NC}"
echo -e "${MAGENTA}=================================================${NC}"

# –í—ã–≤–æ–¥–∏–º —ç–º–æ–¥–∑–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
if [ $test_result -eq 0 ]; then
  echo -e "${GREEN}üéâ üéä ü•≥  –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ! ü•≥ üéä üéâ${NC}"
else
  echo -e "${RED}üò¢ üò¢ üò¢  –û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –æ—à–∏–±–∫–∏ –≤ —Ç–µ—Å—Ç–∞—Ö! üò¢ üò¢ üò¢${NC}"
fi

exit $test_result 