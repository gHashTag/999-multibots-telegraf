# –°–∏—Å—Ç–µ–º–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

## –û–±–∑–æ—Ä

–í —Å–∏—Å—Ç–µ–º–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è enum `simple_transaction_category` –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö PostgreSQL —Å –¥–≤—É–º—è –∑–Ω–∞—á–µ–Ω–∏—è–º–∏:

- `REAL` - —Ä–µ–∞–ª—å–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ (–ø–æ–∫—É–ø–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)
- `BONUS` - –±–æ–Ω—É—Å–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ (–ø—Ä–æ–º–æ-–∫–æ–¥—ã, –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏–∏)

## –ê–¥–º–∏–Ω—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

–ê–¥–º–∏–Ω—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ **–ù–ï** –∏–º–µ—é—Ç –æ—Ç–¥–µ–ª—å–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –≤ enum. –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –æ–Ω–∏ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –ø–æ:

1. **payment_method = 'Admin'** - –æ—Å–Ω–æ–≤–Ω–æ–π —Å–ø–æ—Å–æ–± –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
2. **description —Å–æ–¥–µ—Ä–∂–∏—Ç 'Admin balance'** - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Å–ø–æ—Å–æ–±

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤ –∫–æ–¥–µ

### Zod —Å—Ö–µ–º–∞
```typescript
export const TransactionCategoryEnum = z.enum(['REAL', 'BONUS'])
export type TransactionCategory = z.infer<typeof TransactionCategoryEnum>
```

### –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –±–∞–ª–∞–Ω—Å–∞
```typescript
type BalanceUpdateMetadata = {
  category?: 'REAL' | 'BONUS' // –¢–æ–ª—å–∫–æ —ç—Ç–∏ –¥–≤–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
  payment_method?: string     // 'Admin' –¥–ª—è –∞–¥–º–∏–Ω—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
  // ... –¥—Ä—É–≥–∏–µ –ø–æ–ª—è
}
```

## –û—Ç—á–µ—Ç—ã –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

–í Excel –æ—Ç—á–µ—Ç–∞—Ö –∞–¥–º–∏–Ω—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –ø–æ –ª–æ–≥–∏–∫–µ:

```typescript
// –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
const adminPayments = payments.filter(p => 
  p.payment_method === 'Admin' || 
  (p.description && p.description.includes('Admin balance'))
)
```

### –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ –æ—Ç—á–µ—Ç–∞—Ö:
- üíé **–†–µ–∞–ª—å–Ω—ã–µ** - category = 'REAL'
- üéÅ **–ë–æ–Ω—É—Å—ã** - category = 'BONUS'  
- üë®‚Äçüíº **–ê–¥–º–∏–Ω—Å–∫–∏–µ** - payment_method = 'Admin' –∏–ª–∏ description —Å–æ–¥–µ—Ä–∂–∏—Ç 'Admin balance'

## –ê–¥–º–∏–Ω—Å–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã

### /addbalance
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `payment_method: 'Admin'`
- –ö–∞—Ç–µ–≥–æ—Ä–∏—è —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∫–∞–∫ `'BONUS'`
- –û–ø–∏—Å–∞–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏—Ç "Admin balance"

### –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:
```bash
/addbalance 484954118 1000 –ë–æ–Ω—É—Å –∑–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
/addbalance 484954118 -500 –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ –±–∞–ª–∞–Ω—Å–∞
```

## –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

1. **–ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ category = 'ADMIN'** - —Ç–∞–∫–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –Ω–µ—Ç –≤ enum –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
2. **–ê–¥–º–∏–Ω—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤—Å–µ–≥–¥–∞ –∏–º–µ—é—Ç payment_method = 'Admin'**
3. **–í –æ—Ç—á–µ—Ç–∞—Ö –∞–¥–º–∏–Ω—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤—ã–¥–µ–ª—è—é—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ –æ—Ç REAL –∏ BONUS**
4. **–í—Å–µ –∞–¥–º–∏–Ω—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è —Å –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ–± –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–µ**

## –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (–Ω–∞ –º–æ–º–µ–Ω—Ç –ø–æ—Å–ª–µ–¥–Ω–µ–π –ø—Ä–æ–≤–µ—Ä–∫–∏)

- **REAL**: 878 —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π (87.8%)
- **BONUS**: 122 —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π (12.2%)
- **–ê–¥–º–∏–Ω—Å–∫–∏–µ** (–ø–æ payment_method): 4 —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ 