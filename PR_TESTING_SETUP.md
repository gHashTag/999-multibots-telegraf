# üöÄ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è Pull Requests

## üìã –û–±–∑–æ—Ä

–≠—Ç–∞ —Å–∏—Å—Ç–µ–º–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–µ–ø–ª–æ–∏—Ç—å –∫–∞–∂–¥—ã–π PR –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–æ–≤–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ. –ö–∞–∂–¥—ã–π PR –ø–æ–ª—É—á–∞–µ—Ç:
- –°–≤–æ–∏ –ø–æ—Ä—Ç—ã (–Ω–∞ –æ—Å–Ω–æ–≤–µ –Ω–æ–º–µ—Ä–∞ PR)
- –°–≤–æ–∏ —Ç–µ—Å—Ç–æ–≤—ã–µ –±–æ—Ç—ã
- –ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ Docker
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –æ—á–∏—Å—Ç–∫—É –ø–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è PR

## üõ†Ô∏è –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –±–æ—Ç–æ–≤

–ù—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å 8 —Ç–µ—Å—Ç–æ–≤—ã—Ö –±–æ—Ç–æ–≤ –≤ @BotFather:
```
pr_neuroblogger_test_bot
pr_ai_koshey_test_bot  
pr_neuro_koder_test_bot
pr_neuro_kosheyu_test_bot
pr_ai_blogger_test_bot
pr_ai_master_blogger_test_bot
pr_ai_news_blogger_test_bot
pr_ai_science_blogger_test_bot
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ GitHub Secrets

–í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –¥–æ–±–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ —Å–µ–∫—Ä–µ—Ç—ã:

```bash
# –û—Å–Ω–æ–≤–Ω—ã–µ
DOMAIN=999-multibots-u14194.vm.elestio.app
SSH_PRIVATE_KEY=<–≤–∞—à SSH –∫–ª—é—á –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–µ—Ä–≤–µ—Ä—É>

# –¢–æ–∫–µ–Ω—ã —Ç–µ—Å—Ç–æ–≤—ã—Ö –±–æ—Ç–æ–≤
PR_BOT_TOKEN_1=<—Ç–æ–∫–µ–Ω pr_neuroblogger_test_bot>
PR_BOT_TOKEN_2=<—Ç–æ–∫–µ–Ω pr_ai_koshey_test_bot>
PR_BOT_TOKEN_3=<—Ç–æ–∫–µ–Ω pr_neuro_koder_test_bot>
PR_BOT_TOKEN_4=<—Ç–æ–∫–µ–Ω pr_neuro_kosheyu_test_bot>
PR_BOT_TOKEN_5=<—Ç–æ–∫–µ–Ω pr_ai_blogger_test_bot>
PR_BOT_TOKEN_6=<—Ç–æ–∫–µ–Ω pr_ai_master_blogger_test_bot>
PR_BOT_TOKEN_7=<—Ç–æ–∫–µ–Ω pr_ai_news_blogger_test_bot>
PR_BOT_TOKEN_8=<—Ç–æ–∫–µ–Ω pr_ai_science_blogger_test_bot>

# –ö–æ–ø–∏—Ä—É–µ–º –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Å–µ–∫—Ä–µ—Ç—ã –∏–∑ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
INNGEST_EVENT_KEY
INNGEST_SIGNING_KEY
INNGEST_URL
INNGEST_BASE_URL
SUPABASE_URL
SUPABASE_SERVICE_KEY
SUPABASE_SERVICE_ROLE_KEY
ORIGIN
ADMIN_IDS
SECRET_KEY
LOG_FORMAT
ELEVENLABS_API_KEY
OPENAI_API_KEY
REPLICATE_API_TOKEN
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã:
- Docker –∏ Docker Compose
- Nginx –∏–ª–∏ Traefik –¥–ª—è —Ä–æ—É—Ç–∏–Ω–≥–∞
- SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã

## üéØ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π PR

1. –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∏–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ PR —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç GitHub Action
2. PR –ø–æ–ª—É—á–∞–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä (–Ω–∞–ø—Ä–∏–º–µ—Ä, 42)
3. –°–∏—Å—Ç–µ–º–∞ –≤—ã–¥–µ–ª—è–µ—Ç –ø–æ—Ä—Ç—ã: 4200-4208 –¥–ª—è —ç—Ç–æ–≥–æ PR
4. –°–æ–∑–¥–∞–µ—Ç—Å—è –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º `pr-42`
5. –í PR –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å —Å—Å—ã–ª–∫–∞–º–∏ –Ω–∞ —Ç–µ—Å—Ç–æ–≤—ã–µ –±–æ—Ç—ã

### –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ PR #42 –ª–æ–∫–∞–ª—å–Ω–æ
./scripts/test-pr-local.sh 42

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker-compose -f docker-compose.pr.yml -p pr-42 logs -f

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
docker-compose -f docker-compose.pr.yml -p pr-42 down
```

## üìù –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–æ—Ä—Ç–æ–≤

–î–ª—è PR #N –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø–æ—Ä—Ç—ã:
- `4N99` - API —Å–µ—Ä–≤–µ—Ä (–ø–æ—Ä—Ç 2999)
- `4N00` - Bot 1 (–ø–æ—Ä—Ç 3000)
- `4N01` - Bot 2 (–ø–æ—Ä—Ç 3001)
- `4N02` - Bot 3 (–ø–æ—Ä—Ç 3002)
- –ò —Ç–∞–∫ –¥–∞–ª–µ–µ...

–ü—Ä–∏–º–µ—Ä –¥–ª—è PR #42:
- `4299` - API
- `4200` - Bot 1
- `4201` - Bot 2
- –ò —Ç.–¥.

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Nginx/Traefik

### Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

```nginx
# –î–ª—è –∫–∞–∂–¥–æ–≥–æ PR —Å–æ–∑–¥–∞–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª–æ
server {
    listen 443 ssl;
    server_name pr42.999-multibots-u14194.vm.elestio.app;
    
    ssl_certificate /etc/pki/cert.crt;
    ssl_certificate_key /etc/pki/key.pem;
    
    location / {
        proxy_pass http://localhost:4200;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

### Traefik –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

Traefik –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç —Ä–æ—É—Ç—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ Docker labels –≤ `docker-compose.pr.yml`.

## üêõ –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ PR –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
ssh root@999-multibots-u14194.vm.elestio.app

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ PR #42
docker ps | grep pr-42

# –õ–æ–≥–∏
docker-compose -f /opt/app/999-multibots-telegraf/pr-42/docker-compose.pr.yml -p pr-42 logs -f
```

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

1. **–ü–æ—Ä—Ç—ã –∑–∞–Ω—è—Ç—ã**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ PR —Å —Ç–∞–∫–∏–º –Ω–æ–º–µ—Ä–æ–º –Ω–µ –∑–∞–ø—É—â–µ–Ω
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `docker ps` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

2. **–¢–æ–∫–µ–Ω—ã –±–æ—Ç–æ–≤ –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç**
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–æ–∑–¥–∞–ª–∏ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –±–æ—Ç—ã
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ç–æ–∫–µ–Ω—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ GitHub Secrets

3. **Webhook –Ω–µ –¥–æ—Ö–æ–¥—è—Ç**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Nginx/Traefik
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –≤–∞–ª–∏–¥–Ω—ã

## üéØ Best Practices

1. **–ò–∑–æ–ª—è—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö**
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—Ç–¥–µ–ª—å–Ω—É—é —Ç–µ—Å—Ç–æ–≤—É—é –ë–î –¥–ª—è PR
   - –ò–ª–∏ –ø—Ä–µ—Ñ–∏–∫—Å—ã –≤ —Ç–∞–±–ª–∏—Ü–∞—Ö (`pr42_users`)

2. **–†–µ—Å—É—Ä—Å—ã**
   - –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–π—Ç–µ —Ä–µ—Å—É—Ä—Å—ã –¥–ª—è PR –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è–π—Ç–µ —Å—Ç–∞—Ä—ã–µ PR –æ–∫—Ä—É–∂–µ–Ω–∏—è

3. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**
   - –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ production —Ç–æ–∫–µ–Ω—ã –¥–ª—è PR
   - –û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –¥–æ—Å—Ç—É–ø –∫ —Ç–µ—Å—Ç–æ–≤—ã–º –±–æ—Ç–∞–º

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö PR –æ–∫—Ä—É–∂–µ–Ω–∏–π
ls -d pr-*/ | xargs -I {} bash -c "cd {} && docker-compose -f docker-compose.pr.yml up -d"

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö PR –æ–∫—Ä—É–∂–µ–Ω–∏–π
docker ps --format "table {{.Names}}" | grep "pr-" | xargs -I {} docker stop {}

# –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö PR (—Å—Ç–∞—Ä—à–µ 7 –¥–Ω–µ–π)
find /opt/app/999-multibots-telegraf/pr-* -maxdepth 0 -type d -mtime +7 -exec rm -rf {} \;
```

## üöÄ Roadmap

- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –±–æ—Ç–æ–≤ —á–µ—Ä–µ–∑ API
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ç–µ—Å—Ç–æ–≤–æ–π –ë–î –¥–ª—è –∫–∞–∂–¥–æ–≥–æ PR
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ E2E —Ç–µ—Å—Ç—ã –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è
- [ ] –ù–æ—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≤ Slack/Discord –æ —Å—Ç–∞—Ç—É—Å–µ PR
- [ ] –ú–µ—Ç—Ä–∏–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ PR –æ–∫—Ä—É–∂–µ–Ω–∏–π