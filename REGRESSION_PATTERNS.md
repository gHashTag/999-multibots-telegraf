# üö´ –ü–∞—Ç—Ç–µ—Ä–Ω—ã –†–µ–≥—Ä–µ—Å—Å–∏–π –∏ –ê–Ω—Ç–∏-–ü–∞—Ç—Ç–µ—Ä–Ω—ã

–≠—Ç–æ—Ç —Ñ–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç –æ–ø–∏—Å–∞–Ω–∏–µ –Ω–µ—É–¥–∞—á–Ω—ã—Ö –ø–æ–¥—Ö–æ–¥–æ–≤, –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤, –ø—Ä–∏–≤–æ–¥–∏–≤—à–∏—Ö –∫ –æ—à–∏–±–∫–∞–º, –∏ –∏—Ö –ø—Ä–∏—á–∏–Ω—ã. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –µ–≥–æ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è –æ—à–∏–±–æ–∫.

---

## –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –°—Ü–µ–Ω (–ò—é–Ω—å 2025)

*   **–î–∞—Ç–∞ –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è:** 2025-06-19
*   **–ê–Ω—Ç–∏-–ü–∞—Ç—Ç–µ—Ä–Ω:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ enum –∑–Ω–∞—á–µ–Ω–∏–π –≤–º–µ—Å—Ç–æ —Å—Ç—Ä–æ–∫–æ–≤—ã—Ö –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤ –¥–ª—è –≤—Ö–æ–¥–∞ –≤ —Å—Ü–µ–Ω—ã.
*   **–ü—Ä–æ–±–ª–µ–º–Ω—ã–π –ö–æ–¥:**
    ```typescript
    // ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ enum
    await ctx.scene.enter(ModeEnum.VideoTranscription)
    ```
*   **–ü—Ä–∏—á–∏–Ω–∞ –û—à–∏–±–∫–∏:** 
    *   –°—Ü–µ–Ω—ã —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É—é—Ç—Å—è —Å–æ —Å—Ç—Ä–æ–∫–æ–≤—ã–º–∏ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞–º–∏ (`'video_transcription'`).
    *   Enum –∑–Ω–∞—á–µ–Ω–∏—è (`ModeEnum.VideoTranscription`) –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –∏–º–µ–Ω–∞–º —Å—Ü–µ–Ω.
    *   –≠—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ —Ç–æ–º—É, —á—Ç–æ —Å—Ü–µ–Ω–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –º–æ–∂–µ—Ç –≤–æ–π—Ç–∏ –≤ –Ω—É–∂–Ω—ã–π —Ä–µ–∂–∏–º.
*   **–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ü–æ–¥—Ö–æ–¥:**
    ```typescript
    // ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–æ–∫–æ–≤–æ–≥–æ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞
    await ctx.scene.enter('video_transcription')
    ```
*   **–£—Ä–æ–∫:** –í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –º–µ–∂–¥—É –∏–º–µ–Ω–µ–º —Å—Ü–µ–Ω—ã –≤ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏ –∏–º–µ–Ω–µ–º –≤ `ctx.scene.enter()`.

---

## –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –¢—Ä–µ–±–æ–≤–∞–Ω–∏–π –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –í–Ω–µ—à–Ω–∏—Ö –°–µ—Ä–≤–∏—Å–æ–≤ (–ò—é–Ω—å 2025)

*   **–î–∞—Ç–∞ –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è:** 2025-06-20
*   **–ê–Ω—Ç–∏-–ü–∞—Ç—Ç–µ—Ä–Ω:** –ü–æ–ª–∞–≥–∞—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ –±–∞–∑–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ yt-dlp –±–µ–∑ —É—á–µ—Ç–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π –ø–æ–ª–∏—Ç–∏–∫ –≤–Ω–µ—à–Ω–∏—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º.
*   **–ü—Ä–æ–±–ª–µ–º–Ω—ã–π –ü–æ–¥—Ö–æ–¥:**
    ```typescript
    // ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û - —Ç–æ–ª—å–∫–æ –±–∞–∑–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
    const options = [
      '--format', 'best',
      '--user-agent', 'Mozilla/5.0...',
      url
    ]
    ```
*   **–ü—Ä–∏—á–∏–Ω–∞ –û—à–∏–±–∫–∏:**
    *   Instagram –∏ –¥—Ä—É–≥–∏–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã —Ä–µ–≥—É–ª—è—Ä–Ω–æ —É–∂–µ—Å—Ç–æ—á–∞—é—Ç –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–æ—Å—Ç—É–ø–∞.
    *   –ë–µ–∑ cookies –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –º–Ω–æ–≥–∏–µ –≤–∏–¥–µ–æ —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã–º–∏.
    *   –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ fallback —Å—Ç—Ä–∞—Ç–µ–≥–∏–π –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –ø–æ–ª–Ω–æ–º—É –æ—Ç–∫–∞–∑—É —Å–µ—Ä–≤–∏—Å–∞.
*   **–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ü–æ–¥—Ö–æ–¥:**
    ```typescript
    // ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - —Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π –∏ fallback
    if (url.includes('instagram.com')) {
      options.push('--cookies-from-browser', 'chrome')
      // + fallback —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –ø—Ä–∏ –Ω–µ—É–¥–∞—á–µ
    }
    ```
*   **–£—Ä–æ–∫:** –í—Å–µ–≥–¥–∞ –ø—Ä–µ–¥—É—Å–º–∞—Ç—Ä–∏–≤–∞–π—Ç–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –∏ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤.

---

## –ù–µ–∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ –°–æ–æ–±—â–µ–Ω–∏—è –æ–± –û—à–∏–±–∫–∞—Ö (–û–±—â–∏–π –ü–∞—Ç—Ç–µ—Ä–Ω)

*   **–ê–Ω—Ç–∏-–ü–∞—Ç—Ç–µ—Ä–Ω:** –ü–æ–∫–∞–∑ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫ –±–µ–∑ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è –ø—Ä–∏—á–∏–Ω –∏ —Å–ø–æ—Å–æ–±–æ–≤ —Ä–µ—à–µ–Ω–∏—è.
*   **–ü—Ä–æ–±–ª–µ–º–Ω—ã–π –ö–æ–¥:**
    ```typescript
    // ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û - —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    await ctx.reply('‚ùå Error: Command failed: yt-dlp...')
    ```
*   **–ü—Ä–∏—á–∏–Ω–∞ –û—à–∏–±–∫–∏:**
    *   –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –ø–æ–Ω–∏–º–∞—é—Ç —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏.
    *   –ù–µ—Ç —É–∫–∞–∑–∞–Ω–∏–π –Ω–∞ —Ç–æ, —á—Ç–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –¥–ª—è —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã.
    *   –°–Ω–∏–∂–∞–µ—Ç—Å—è –¥–æ–≤–µ—Ä–∏–µ –∫ —Å–µ—Ä–≤–∏—Å—É.
*   **–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ü–æ–¥—Ö–æ–¥:**
    ```typescript
    // ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - –ø–æ–Ω—è—Ç–Ω–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ —Å —Ä–µ—à–µ–Ω–∏–µ–º
    if (error.message.includes('Instagram may require login')) {
      errorMessage = '–í–∏–¥–µ–æ –ø—Ä–∏–≤–∞—Ç–Ω–æ–µ –∏–ª–∏ —Ç—Ä–µ–±—É–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–æ–µ –≤–∏–¥–µ–æ –∏–ª–∏ –∑–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª –Ω–∞–ø—Ä—è–º—É—é.'
    }
    ```
*   **–£—Ä–æ–∫:** –í—Å–µ–≥–¥–∞ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –≤ –ø–æ–Ω—è—Ç–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å–æ–æ–±—â–µ–Ω–∏—è —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π.

---

*–≠—Ç–æ—Ç —Ñ–∞–π–ª –±—É–¥–µ—Ç –ø–æ–ø–æ–ª–Ω—è—Ç—å—Å—è –ø–æ –º–µ—Ä–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –Ω–æ–≤—ã—Ö –∞–Ω—Ç–∏-–ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –∏ —Ä–µ–≥—Ä–µ—Å—Å–∏–π.*
