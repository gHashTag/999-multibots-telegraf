# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—é –Ω–æ–≤—ã—Ö –±–æ—Ç–æ–≤ ü§ñ

–≠—Ç–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –æ–ø–∏—Å—ã–≤–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö Telegram –±–æ—Ç–æ–≤ –≤ —Å–∏—Å—Ç–µ–º—É 999-multibots-telegraf.

## 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –±–æ—Ç–∞ –≤ Telegram üì±

1. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤–æ–≥–æ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ [@BotFather](https://t.me/BotFather) –≤ Telegram
2. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π —Ç–æ–∫–µ–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä: `1234567890:ABCDEFGHIJKLMNOPQRSTuvwxyz`)
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∏–º—è, –æ–ø–∏—Å–∞–Ω–∏–µ –∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –±–æ—Ç–∞ –ø–æ –∂–µ–ª–∞–Ω–∏—é

## 2. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –±–æ—Ç–∞ –≤ —Å–∏—Å—Ç–µ–º—É üîß

### 2.1. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ –≤ .env —Ñ–∞–π–ª

–û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `.env` –∏ –¥–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—ã–π —Ç–æ–∫–µ–Ω:

```
# –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–æ–∫–µ–Ω—ã
BOT_TOKEN_1=...
BOT_TOKEN_2=...
...
# –î–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—ã–π —Ç–æ–∫–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É—è —Å–ª–µ–¥—É—é—â–∏–π –ø–æ—Ä—è–¥–∫–æ–≤—ã–π –Ω–æ–º–µ—Ä
BOT_TOKEN_8=1234567890:ABCDEFGHIJKLMNOPQRSTuvwxyz
```

### 2.2. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –±–æ—Ç–∞ –≤ src/core/bot/index.ts

–û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `src/core/bot/index.ts` –∏ –¥–æ–±–∞–≤—å—Ç–µ –∏–º—è –Ω–æ–≤–æ–≥–æ –±–æ—Ç–∞ –≤ –æ–±—ä–µ–∫—Ç `BOT_NAMES`:

```typescript
export const BOT_NAMES: Record<string, string | undefined> = {
  ['neuro_blogger_bot']: process.env.BOT_TOKEN_1,
  ['MetaMuse_Manifest_bot']: process.env.BOT_TOKEN_2,
  // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –±–æ—Ç—ã ...
  ['NewBotName_bot']: process.env.BOT_TOKEN_8, // –î–æ–±–∞–≤—å—Ç–µ –≤–∞—à–µ–≥–æ –Ω–æ–≤–æ–≥–æ –±–æ—Ç–∞
}
```

### 2.3. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Ä—Ç–∞ –≤ docker-compose.yml

–ï—Å–ª–∏ –≤—ã –¥–æ–±–∞–≤–ª—è–µ—Ç–µ 8-–≥–æ –±–æ—Ç–∞, —Ç–æ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ—Ä—Ç 3008 –≤ docker-compose.yml:

```yaml
services:
  app:
    ports:
      - '2999:2999'
      - '3000:3000'
      - '3001:3001'
      - '3002:3002'
      - '3003:3003'
      - '3004:3004'
      - '3005:3005'
      - '3006:3006'
      - '3007:3007'
      - '3008:3008'  # –î–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—ã–π –ø–æ—Ä—Ç
```

### 2.4. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Nginx

–î–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—ã–π –±–ª–æ–∫ location –≤ —Ñ–∞–π–ª `nginx-config/default.conf`:

```nginx
location /NewBotName_bot {
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection 'upgrade';
    proxy_cache_bypass $http_upgrade;
    proxy_redirect off;
    proxy_pass http://172.27.0.2:3008;  # IP-–∞–¥—Ä–µ—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∏ –Ω–æ–º–µ—Ä –ø–æ—Ä—Ç–∞
}
```

## 3. –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π üöÄ

–ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É —á–µ—Ä–µ–∑ SSH:
```bash
ssh -i ~/.ssh/id_rsa root@999-multibots-u14194.vm.elestio.app
```

–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –∫–∞—Ç–∞–ª–æ–≥ –ø—Ä–æ–µ–∫—Ç–∞:
```bash
cd /opt/app/999-multibots-telegraf
```

–ü–æ–ª—É—á–∏—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è:
```bash
git pull
```

–ó–∞–ø—É—Å—Ç–∏—Ç–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:
```bash
./update-docker.sh
```

## 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã –Ω–æ–≤–æ–≥–æ –±–æ—Ç–∞ ‚úÖ

### 4.1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –≤–µ–±—Ö—É–∫–∞

```bash
curl -s https://api.telegram.org/bot$BOT_TOKEN_8/getWebhookInfo | grep -v token
```

–í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å URL –≤–µ–±—Ö—É–∫–∞:
```
{"ok":true,"result":{"url":"https://999-multibots-telegraf-u14194.vm.elestio.app/NewBotName_bot","has_custom_certificate":false,"pending_update_count":0,"max_connections":40,"ip_address":"138.199.145.157"}}
```

### 4.2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –±–æ—Ç–∞

–û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤–∞—à–µ–º—É –±–æ—Ç—É –≤ Telegram –∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –æ–Ω –æ—Ç–≤–µ—á–∞–µ—Ç.

### 4.3. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ª–æ–≥–æ–≤

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏, —á—Ç–æ–±—ã —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –±–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç:
```bash
docker logs 999-multibots | grep NewBotName_bot
```

## 5. –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º üîç

### 5.1. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ IP-–∞–¥—Ä–µ—Å–∞ –≤ Nginx

–ï—Å–ª–∏ IP-–∞–¥—Ä–µ—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∏–∑–º–µ–Ω–∏–ª—Å—è, –æ–±–Ω–æ–≤–∏—Ç–µ –µ–≥–æ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:
```bash
./update-nginx-config.sh
```

### 5.2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ 

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç-–ø–æ–º–æ—â–Ω–∏–∫ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:
```bash
./nginx-helper.sh
```

### 5.3. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

–ï—Å–ª–∏ –±–æ—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã:
```bash
docker-compose down
docker-compose up -d
./update-nginx-config.sh
```

## 6. –£–¥–∞–ª–µ–Ω–∏–µ –±–æ—Ç–∞ ‚ùå (–ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏)

1. –£–¥–∞–ª–∏—Ç–µ —Ç–æ–∫–µ–Ω –∏–∑ `.env`
2. –£–¥–∞–ª–∏—Ç–µ –±–æ—Ç–∞ –∏–∑ `BOT_NAMES` –≤ `src/core/bot/index.ts`
3. –£–¥–∞–ª–∏—Ç–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –±–ª–æ–∫ location –∏–∑ `nginx-config/default.conf`
4. –ü—Ä–∏–º–µ–Ω–µ–Ω–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å –ø–æ–º–æ—â—å—é `./update-docker.sh` 